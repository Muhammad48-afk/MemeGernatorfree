<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <title>Meme Generator</title>
</head>
<body class="bg-black min-h-screen p-6 text-white font-sans">

  <h1 class="text-4xl text-center font-bold mb-6">Meme Generator</h1>

  <!-- Meme Preview Area -->
  <div class="flex flex-col md:flex-row gap-6 items-start justify-center">
    
    <!-- Meme Canvas -->
    <div id="memeCanvas" class="relative w-[300px] h-[300px] bg-white rounded shadow overflow-hidden">
      <img id="memeImg" src="public/meme/5.jpg" alt="Meme"
        class="w-full h-full object-cover" />
      <div id="memeText"
        class="absolute top-4 w-full text-center text-white font-bold text-xl drop-shadow pointer-events-none">
      </div>
    </div>

    <!-- Controls -->
    <div class="flex flex-col gap-4">
      <input id="memeInput" type="text" placeholder="Enter top text"
        class="px-4 py-2 bg-gray-700 text-white rounded placeholder-gray-400">
      <button id="generateBtn"
        class="bg-blue-500 hover:bg-blue-700 px-4 py-2 rounded text-white font-semibold">Add Text</button>
      <button id="downloadBtn"
        class="bg-green-500 hover:bg-green-700 px-4 py-2 rounded text-white font-semibold">Download Meme</button>
    </div>
  </div>

  <!-- Meme Selection -->
  <h2 class="text-2xl mt-10 mb-4 text-center">Choose a Meme:</h2>
  <div class="flex flex-wrap gap-4 justify-center">
    <img src="public/meme/1.jpg" class="w-24 h-24 object-cover cursor-pointer rounded shadow" onclick="selectMeme('public/meme/1.jpg')">
    <img src="public/meme/2.jpg" class="w-24 h-24 object-cover cursor-pointer rounded shadow" onclick="selectMeme('public/meme/2.jpg')">
    <img src="public/meme/3.jpg" class="w-24 h-24 object-cover cursor-pointer rounded shadow" onclick="selectMeme('public/meme/3.jpg')">
    <img src="public/meme/4.jpg" class="w-24 h-24 object-cover cursor-pointer rounded shadow" onclick="selectMeme('public/meme/4.jpg')">
    <img src="public/meme/5.jpg" class="w-24 h-24 object-cover cursor-pointer rounded shadow" onclick="selectMeme('public/meme/5.jpg')">
  </div>

  <!-- JavaScript -->
  <script>
    const previewImage = document.getElementById("memeImg");
    const previewText = document.getElementById("memeText");
    const textInput = document.getElementById("memeInput");
    const generateBtn = document.getElementById("generateBtn");
    const downloadBtn = document.getElementById("downloadBtn");

    // Change image on click
    function selectMeme(imgPath) {
      previewImage.src = imgPath;
      previewText.innerText = "";
      textInput.value = "";
    }

    // Add text on image
    generateBtn.onclick = function () {
      const text = textInput.value.trim();
      previewText.innerText = text;
    };

    // Download meme as image
    downloadBtn.onclick = function () {
      const memeContainer = document.getElementById("memeCanvas");
      html2canvas(memeContainer).then(canvas => {
        const link = document.createElement('a');
        link.download = 'my-meme.png';
        link.href = canvas.toDataURL("image/png");
        link.click();
      });
    };
  </script>

</body>
</html>
